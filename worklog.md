# Worklog

Keeping track of the work done each week. This worklog is best viewed in a text editor that can interpret the Markdown (.md) format. For those not viewing on GitHub already, [here is a link to this file on GitHub.](https://github.com/chbkull/mus499c-sp22/blob/main/worklog.md)

## 1/27

This week was spent putting together a sound library to use as a starting point for the composition. Some of the library was recently recorded (candle jar, ice, gingersnap box, etc.), and the rest of the library was from the recordings I took for Music 409 about a year ago. This sound library is by no means complete, and if I encounter any sonically interesting objects I'll be sure to record them and add them in as well. I may also continue to scour my 409 library as there are a lot of files in there that may come of use.

One other thing of note- I was using Audacity to record the sounds and it turns out I made an error with some of my recordings. When I was exporting the chopped up audio I was mistakenly using "Export as WAV" rather than "Export Selected Audio," which causes some of the recordings I did to hold the entire track rather than the portion cut down to the sample itself. Objects affected by this include: candle jar, cardboard tube, gingersnap box, ice, salt shaker, Yeti bottle, and rubber band. I'll spend some time the following week cutting these samples back down to what I had originally intended.

## 1/31

Took time today to correct the mistake I made last week around saving entire tracks of samples instead of individual samples. Huge credit to the [Nyquist Effect Audacity plugin Trim Silence](https://wiki.audacityteam.org/wiki/Nyquist_Effect_Plug-ins#Trim_Silence) for speeding up this process immensely. Trim silence takes an audio clip and removes silence below a certain threshold from *only* the start and the end of the clip. Perfect for cleaning up the tracks that were relatively clean and only had silence between them. I ended up running all of my samples through trim silence to get rid of any extra silence. The settings I used were a threshold of -48 dB with 0 sec of silence left at both the start and end.

An interesting way to put it is, prior to clean up, the `SoundLibrary` folder was \~170 MB, and after it was \~67 MB, so that's just over 100 MB of silence removed. Even then this estimate is slightly conservative as I went back through my raw recordings and added in a few more samples from the gingersnap box, ice, rubberband, salt shaker, and Yeti bottle.

## 2/1

Not added to the repository yet, but I took Prof. Fieldsteel's code that unpacks a library into an event and quickly plays through all of the different sounds. The ones that caught my attention today were the "resonator" samples from my Swell bottle. Clear fundamental with relatively clean harmonics, so a basic sound. As a refresher to get back into SuperCollider, I set up a simple `SynthDef` and `Pbind` to just play through the sample with varied random parameters. The work is located in `chimes.scd`.

## 2/3

Went back and recorded three more objects: a plastic Rinse-Aid bottle, a big metal bowl, and a small metal bowl (I was inspired by Prof. Fieldsteel's water warbling effect that I decided to try and record some for my self as well). The recordings can be found in the `SoundLibrary` folder.

Reorganized the directories by adding an `Ideas` folder. Plan is that inside will be some smaller SuperCollider files that play around with specific UGens or patterns. For this week, there are two such files inside. One is `chimes.scd`, which has been changed to use the resonate samples from the big metal bowl. Basic `Pbind` setup where two sample players are running in parallel. Nothing too rhythmic or complex, but it does remind me a bit of singing bowls, albeit played at a faster rate. The other is `dynklank.scd`, which is where I'm exploring the `DynKlank` UGen after discussing it last class. Decided to run some basic cafe background noise through it with specific frequencies. Setting the frequencies to scales gave quite an interesting result, so I'm thinking of maybe playing around with more scales next week and layering a couple of them on top of each other.

## 2/10

Unfortunately this week I was a bit more shortchanged on time than I would've liked due to assignments for other courses taking up more time than I originally expected. In any case, I spent my time focusing on `dynklank.scd`, as I really wanted to see about wrapping `DynKlank` in a `SynthDef`. My first attempt at all of this hit a bit of a snag- I was running into errors that I suspect might have to do with the requirement of using an array reference rather than a classic array. I was unable to find documentation online, but if I had to guess I think `DynKlank`'s parameters need to be known at initialization time, at least to a certain degree, in order for it to set up all of its internals correctly. The synth can be created just fine if everything is hardcoded. If all three members of the reference array are variables, the SuperCollider interpreter complains. If two of the members are variables and one is fixed, it does work, but from what I can tell it does not produce any audible sound. Very strange behavior, hopefully we can try and piece together what is happening in class.

For the time being I decided to ignore those parameters inside the reference array, and created a `SynthDef` that has knobs for literally everything else. More specifically, there are arguments for controlling the played back buffer (buffer itself, rate, starting frame). There are also arguments for messing with `DynKlank` itself (frequency scale, offset, and decay). Finally, there is control over an ASR envelope as well as panning and the out channel. After all of that, I set up a `Pbind` and began experimenting. There's still some finetuning to be had, but something about this stream it creates is facinating to me. There is an ebb and flow, where sometimes the randomness on the ASR envelopes line up such that the `DynKlank`s all surge, and at other times everything quiets down before it picks back up again. There's textures all over, with tiny scratches and repeated knocks that poke in at times, a product of the `DynKlank` parameters as well as the natural noises of the cafe samples themselves. It's just absolutely incredible that what is being produced is being sourced from three one-minute samples of just natural noise.

The plans for next week are to go back and revisit `chimes.scd`, and see if there's a way I can merry it together with this texture I just made. Other than that, if we do manage to figure out how to modify the reference array, I would like to try and sequence that in some sense. One idea on my mind is kind of slowly adding more and more resonators to the bank over time. If that doesn't work, I want to get a bit more intimate with each of the individual parameters do in order to nail down their behavior, figure out what exactly induces what. If I can figure that out, that should give a solid basis for formulating this into a composition.

## 2/16

After debugging in class last week the issue with passing parameters into `DynKlank`, I took the time to integrate that into my own synth along with some other improvements. First of all, converted the synth's arguments to use `NamedControl` as outlined in [this scsynth forum post](https://scsynth.org/t/namedcontrol-a-better-way-to-write-synthdef-arguments/186) (thank you Prof. Fieldsteel for pointing me towards this). I also used the array notation alongside `Pfunc` in order to share the selected buffer across two different arguments, instead of using `Pkey`. Finally, I added the `DynKlank` parameters to the synth.

Things seemed to work, at least at first, but I ran into two different issues when I began playing with the refined synth. First, I tried to set the `DynKlank` default parameters to be arrays of size one, but this was throwing an error related to a `.sum` call. It's not entirely clear to me why this would be a problem, considering that it appears `DynKlank` has fallback parameters of [440.0], [1.0], and [1.0], but a way to circumvent this issue is adding a set of zeroes on the end of each of the arrays.

After figuring that out, I tried to setup a `Pbind` similar to last week's with the new synth, and ran into a strange issue where only a few frequencies were poking through. A whole bunch of troubleshooting later, I encountered [this scsynth post](https://scsynth.org/t/problems-with-variable-literal-array-and-namedcontrol/941) that reminded me that arrays in a `SynthDef` must be fixed. The issue was that my default parameters were only a couple elements, and what it would do is it would take my more complex pattern and only grab the first couple frequencies, rather than the whole thing. In order to fix this, the `SynthDef` has to have arrays big enough to hold whatever is passed into it. My array is of length 25, but I figured I would try 50 to be safe (ex: default argument of `0!50`). This ended up tanking my CPU and SuperCollider slowly rolled to a halt. Long story short, `DynKlank` is not cheap, so I need to either make sure I don't reserve more resonators than needed (maybe define multiple `SynthDef`s of predefined sizes?) or find a way to use `DynKlank` more efficently. There might be a way to sum up the input signal that is fed to the `DynKlank` to achieve the same effect, but I also vary the `DynKlank` params heavily which allows me to achieve some of the more interesting textures.